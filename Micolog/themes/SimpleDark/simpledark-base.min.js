/* <![CDATA[ */
var RegAjaxUrl = /^\/?(category\/\w+|tag\/|\d{4}|\?p=)/;

function linkClick() {
    var url = $(this).attr("href");
    if (RegAjaxUrl.test(url)) {
        var base = $("#blog-name a").attr("href");
        var param = (url.indexOf("?") >= 0) ? "&ajax=1" : "?ajax=1";
        var seg = url.split("#");
        if (seg.length > 1) url = seg[0] + param + "#" + seg[1];
        else url += param;
        $("#page>#main>#content").load(base.substring(0, base.length - 1) + url);
        return false;
    }
 };

 function bindLinkClick(s) {
     $(s).bind("click", linkClick);
 };

 $(document).ready(function() {
     $("#page>#main a").live("click", linkClick);
 });